(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(t,e,a){t.exports=a(43)},24:function(t,e,a){},43:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=(a(24),a(4)),i=a.n(l),s=a(5),u=a(2),p=a(18),f=a(3),h=a.n(f),m=function(t){var e=t.path,a=t.lon,c=t.lat,o=t.createPath,l=t.setFirstPoint,i=t.firstClick,s=t.reset,u=t.waypoints,f=Object(n.useRef)(null);Object(n.useEffect)((function(){f.current&&f.current.remove(),m()}),[s]),Object(n.useEffect)((function(){e&&f.current&&(h.a.polyline(e,{color:"black",weight:6}).addTo(f.current),h.a.polyline(e,{color:"white",weight:5}).addTo(f.current),h.a.polyline(e,{color:"navy",weight:3}).addTo(f.current));var t,a=Object(p.a)(u);try{for(a.s();!(t=a.n()).done;){var n=t.value;n&&g(n)}}catch(r){a.e(r)}finally{a.f()}}),[e,u]),Object(n.useEffect)((function(){i?f.current.on("click",(function(t){return b(t)})):(f.current.off("click"),f.current.on("click",(function(t){return d(t)})))}),[i,a,c]);var m=function(){f.current=h.a.map("map").setView([c,a],14),h.a.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.png",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'}).addTo(f.current)},d=function(t){o(t.latlng.lng,t.latlng.lat)},b=function(t){l(t.latlng.lng,t.latlng.lat),g([t.latlng.lat,t.latlng.lng])},g=function(t){h.a.circleMarker(t,{radius:6,color:"black"}).addTo(f.current),h.a.circleMarker(t,{radius:5,color:"white"}).addTo(f.current),h.a.circleMarker(t,{radius:4,color:"navy",fillOpacity:1}).addTo(f.current)};return r.a.createElement("div",{id:"map",className:"mapElement"})},d=a(7),b=a.n(d),g=function(){var t=Object(s.a)(i.a.mark((function t(e,a,n,r){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("".concat("/api/path","/").concat(e,"/").concat(a,"/").concat(n,"/").concat(r));case 2:return c=t.sent,t.abrupt("return",c.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),v=function(t){var e=t.len,a=t.resetPath,n=t.firstClick,c=t.setFirstPoint,o=t.errorMsg;return r.a.createElement("div",null,r.a.createElement("span",{className:"toolbarSpan"},"Click on the map to select the",n?r.a.createElement(r.a.Fragment,null," first location or",r.a.createElement("button",{className:"toolbarBtn",onClick:function(){navigator.geolocation.getCurrentPosition((function(t){n&&c(t.coords.longitude,t.coords.latitude)}))}},"use current location")):" next location","."),r.a.createElement("br",null),r.a.createElement("span",{className:"toolbarSpan"},"Path length: ",Math.round(e)," m",r.a.createElement("button",{className:"toolbarBtn",onClick:a},"Reset path")),r.a.createElement("p",{style:{color:"red"}},o))},O=function(){return r.a.createElement("div",{className:"mapElement"},r.a.createElement("h1",{id:"loadingText"},"Generating path"))},E=function(){var t=Object(n.useState)([]),e=Object(u.a)(t,2),a=e[0],c=e[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),p=l[0],f=l[1],h=Object(n.useState)(22.265),d=Object(u.a)(h,2),b=d[0],E=d[1],j=Object(n.useState)(60.452),w=Object(u.a)(j,2),y=w[0],k=w[1],S=Object(n.useState)(0),C=Object(u.a)(S,2),P=C[0],M=C[1],N=Object(n.useState)(!1),T=Object(u.a)(N,2),x=T[0],B=T[1],F=Object(n.useState)(!0),D=Object(u.a)(F,2),J=D[0],L=D[1],R=Object(n.useState)(!1),W=Object(u.a)(R,2),z=W[0],A=W[1],G=Object(n.useState)(""),I=Object(u.a)(G,2),V=I[0],Y=I[1],$=function(){var t=Object(s.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B(!0),t.next=3,g(b,y,e,n);case 3:r=t.sent,Number(r.dist)!==1/0?(0===p.length?f([r.path[0],r.path[r.path.length-1]]):f(p.concat([r.path[r.path.length-1]])),c(a.concat(r.path)),M(P+Number(r.dist)),E(e),k(n)):(Y("Error: could not find a path."),setTimeout((function(){Y("")}),5e3)),B(!1);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),q=function(t,e){L(!1),E(t),k(e)};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"topDiv"},r.a.createElement("h1",{id:"title"},"Shortest path finder"),r.a.createElement(v,{len:P,resetPath:function(){L(!0),c([]),f([]),M(0),A(!z)},firstClick:J,setFirstPoint:q,errorMsg:V})),x?r.a.createElement(O,null):r.a.createElement(m,{path:a,lon:b,lat:y,createPath:$,setFirstPoint:q,firstClick:J,reset:z,waypoints:p}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.6c028800.chunk.js.map